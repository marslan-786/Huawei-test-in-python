[supervisord]
nodaemon=true

# 1. Virtual Screen (مانیٹر)
[program:xvfb]
command=/usr/bin/Xvfb :0 -screen 0 1280x720x24
autorestart=true
priority=1

# 2. Desktop Interface (ڈیسک ٹاپ)
[program:fluxbox]
command=/usr/bin/fluxbox
autorestart=true
priority=2
environment=DISPLAY=":0"

# 3. VNC Server (ویڈیو سگنل)
[program:x11vnc]
command=/usr/bin/x11vnc -display :0 -forever -shared -nopw -bg -listen localhost -xkb
autorestart=true
priority=3

# 4. Web Viewer (براؤزر میں دکھانے والا)
# اہم نوٹ: یہ ریلوے کے $PORT پر چلے گا
[program:novnc]
command=bash -c "/usr/share/novnc/utils/launch.sh --vnc localhost:5900 --listen 0.0.0.0:$PORT"
autorestart=true
priority=4